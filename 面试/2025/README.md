#### 企微应用
1. 工作提醒的菜单入口改成动态的，根据配置的菜单进行显示（之前是固定的，现在改成根据角色拥有的菜单进行显示）。重构这部分显示的逻辑代码（之前的代码通过判断是否满足当前的角色再查询菜单待办事项的数量。重构之后的逻辑：查询工作提醒的菜单，遍历得到的菜单，根据菜单批量查询提示的数量，减少请求的数量）
2. 精准群发客户选择列表优化。客户数量比较多时候卡顿（2000+）
  (1) 选中客户的时候，客户的头像会全部加载并显示，如果上千条记录的时候会堆积到底部（移动端，位置少，看不到但是头像的资源会去请求，从而造成资源浪费，占用内存）
  (2) 优化前：选中5000条数据，点击的时候响应时间是2s，优化后响应0.5秒
  (3) 优化的措施：头像和客户列表改成虚拟列表的形式，减少了DOM的数量，减少了图片资源的请求和内存空间的占用

#### 企微后台管理
Vue2 + ElementUI

内容：常规页面数据增删改查

问题：表格的render的时候使用Tooltip组件，通过v-if判断是否使用tooltip显示遇到当前的单元格没有数据，但是切换分页的时候下一页的这个单元格有数据，那这个tooltip不会显示。（key的问题，组件没有更新）解决的方法是改用el-tooltip的disabled属性控制

#### sa

##### E行主题适配

已有的方案：在body上添加data-theme属性，通过css选择器来修改样式。

存在的问题：
   - 由于使用多套组件以及不同版本，不能直接通过升级来适配
   - 应用之间可能修改过组件的前缀


解决的方案是：
1) 将antd的css文件通过postcss解析，将前缀改成变量，只保留颜色相关的属性，再将结果保存为一个文件，通过less引入，并且通过传入不同的前缀实现不同类型下的主题适配
```less
  body[data-theme="blue"] {
    --sa-primary-color: #3370ff;
    --sa-primary-color-hover: #5c92ff;

    .scope-style(@prefix) {
      @scope-prefix: @prefix;
      @import './uecp.less';
    }

    :global {
      .scope-style(~'map-pc');
      .scope-style(~'ant');
    }
  }
```
2) 将导入的方法抽离的公共库中，hoc的形式。主要的作用是解决样式文件在加载的时候保存页面的loading状态，避免页面出现主题色切换的问题
```js
export const withBridge = (Component, config) => {
  const {Loading, loadingProps, loadStyle} = config||{}
  const Bridge = (props) => {
    const [loading, setLoading] = useState(isUECPTheme);

    useEffect(() => {
      if (isUECPTheme) {
        const execute = async () => {
          try {
            await loadStyle?.();
          } finally {
            setLoading(false)
          }
        }
        execute();
      }
    }, [])

    if (loading && Loading) {
      return createElement(Loading, {type: 'box', ...loadingProps})
    }
    
    return createElement(Component, props)
  }
  return Bridge;
}
```

##### KYC标签

业务流程

1. kyc配置（支持kyc标签的配置，增删改查，标签的分类【基本信息、金融资产、偏好、自定义的分类和标签】）
2. 客户视图-客户标签支持给客户打标，之前在kyc配置里面配置的标签会在这里显示，然后给用户打上这些标签
3. 打标之后的客户在客户kyc记录里面查询，查找的时候按照并集的方式，查询的结果通过创建临时客群的方式进行管理（可以查看资产、客户的信息）

客户标签从获取到展示的逻辑

1. 单独调用标签分类的接口，获取标签分类，包含所有的标签分类和对应的标签子类
2. 先调用PCM的接口获取关注、最新的标签以及sa的标签
3. 再根据sa标签的标签调用dc的结果，查询dc中标签的数据
4. 根据dc的标签数据和刚刚PCM获取的标签比较，取id相同的标签
5. 在根据一开始获取到的标签跟4得到的结果标签，相同的id标签展示在页面中 ？？ 为什么每步的作用的干什么

客户标签：日更标签、月更标签

#### 网易贷标签
持有标志 + 预授信额度

##### 一眼清

客户信息数据整合，在线索执行里面整合客户信息，可以在不跳转客户视图即可查看到客户的数据，配合新增的ai画像信息，方便客户经理取分析客户，推荐产品给客户，查看用户的联系信息、投资偏好、资产分布以及风险信息

##### 双时光轴
高效展示客户行为与银行触客行为全貌，清晰了解客户需求及偏好，进行针对性的服务，减少客户重复打扰
数据链路：EDW->DC->SDS->MAP->SA、E行
数据时效性：实时的、T+1的（离线的数据，离线的数据是指通过批处理的数据，时效性一般T+1/2）

客户的小结：通过大模型进行脱敏（处理掉金额、手机号码、银行卡号、身份证号、地址、公司名称）

小姐时效性：T+3

单次限流1000条数据
最大的数据量为20亿

金额前端脱敏规则
1. 金额大于0.1的显示`值+`
2. 金额大于0且小于0.1的时候显示0.1-
3. 金额大于-0.1且小于0的时候显示-0.1+
4. 金额小于-0.1的时候显示`-值-`
5. 万元的展示按照除以10000，再按照上面的规则显示

#### app
1. 角色融合
解决的问题：去掉员工角色切换的操作，根据登录员工拥有的角色来判断将拥有的权限、资源点放出来
解决的方案：将旧页面复制一份，对于设计到角色id的地方进行改造，接口涉及角色id的去掉这个角色id，权限资源点涉及到角色id的，根据员工角色列表判断。
在原来的入口里面在通过一个withRoleFusion的hoc包裹，在这个hoc里面查询是否角色融合的开关是否开启了，然后再进行是访问原来的页面还是新的角色融合的页面

问题：Drawer、Table的fixed组件在ios层级的显示不对，通过transform: translateZ

2. 埋点
- 移动端
  1) 提出埋点的需求 -> 业务将埋点的需求发送到埋点平台相关的负责人
  2) 埋点平台收到邮件之后根据需求设计埋点事件
  3) 设计完成之后，给开发发送邮件确认是否满足需求，进行调整
  4) 埋点平台录入系统，开发上报埋点信息

3. 业务架构

客户端 -> scc（鉴权）->集成层 -> 中台 -> 数湖

4. 回退方案
  1. 添加开关，屏蔽代码
  2. 如果是从安保里面获取的，可以通过修改安保的功能地址访问备份的方案
  3. 局部使用，开关的一种，根据配置的机构、角色，员工号进行开放或者屏蔽

5. 
